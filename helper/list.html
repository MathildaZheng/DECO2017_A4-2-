<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>list</title>

    <link rel="stylesheet" href="layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/data.css" />
</head>
<body>

<div class="main">
    <div class="left">
        <div class="tx">
            <div class="img">
                <img src="./img/js3.jpg" width="100%" height="100%">
            </div>
            <div class="tx-a">
                <a class="log">log in /</a>
                <a class="log">sign in </a>
            </div>
        </div>
        <div class="le-main">
            <ul>
                <li>
                    <div class="svg">
                        <svg id="ic_calendar" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 36 36">
                            <path d="M0,0H36V36H0Z" fill="none"/>
                            <rect width="24" height="24" rx="2" transform="translate(6 7)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            <line y2="5" transform="translate(24 5)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            <line y2="5" transform="translate(12 5)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            <line x2="24" transform="translate(6 16)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            <line x2="6" transform="translate(15 24)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="svg-a">
                        <a href="calender.html">Calender</a>
                    </div>
                </li>
                <li>
                    <div class="svg">
                        <svg id="ic_invoice" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 43 43">
                            <path  d="M0,0H43V43H0Z" fill="none"/>
                            <path  d="M14,3v7.167a1.792,1.792,0,0,0,1.792,1.792h7.167" transform="translate(11.083 2.375)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            <path  d="M26.5,35.25H8.583A3.583,3.583,0,0,1,5,31.667V6.583A3.583,3.583,0,0,1,8.583,3H21.125l8.958,8.958V31.667A3.583,3.583,0,0,1,26.5,35.25Z" transform="translate(3.958 2.375)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            <line x2="2" transform="translate(16 13)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            <line x2="11" transform="translate(16 24)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            <line x2="3" transform="translate(24 30)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="svg-a">
                        <a href="tasks.html">Tasks</a>
                    </div>
                </li>
                <li>
                    <div class="svg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 35 35">
                            <g id="ic_dashboard" transform="translate(-635 3)">
                                <g id="home" transform="translate(635 -3)">
                                    <path d="M0,0H35V35H0Z" fill="none"/>
                                </g>
                                <path id="Shape" d="M18.851,29H1.45A1.451,1.451,0,0,1,0,27.55V9.425a2.9,2.9,0,0,1,2.9-2.9H8.7V2.9A2.9,2.9,0,0,1,11.6,0h5.8a2.9,2.9,0,0,1,2.9,2.9V13.05h5.8a2.9,2.9,0,0,1,2.9,2.9v11.6A1.451,1.451,0,0,1,27.55,29ZM26.1,26.1V15.95H20.3V26.1Zm-14.5,0h5.8V15.95q0-.043,0-.086V2.9H11.6Zm-8.7,0H8.7V9.425H2.9Z" transform="translate(638)" fill="#fafafa" stroke="#fafafa" stroke-width="1"/>
                            </g>
                        </svg>
                    </div>
                    <div class="svg-a active">
                        <a href="list.html">list</a>
                    </div>
                </li>
                <li>
                    <div class="svg">
                        <svg id="icons_dark_time" data-name="icons/dark/time" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 31 31">
                            <rect width="31" height="31" fill="#fafafa" opacity="0"/>
                            <g id="ico" transform="translate(3 4)">
                                <circle  cx="12" cy="12" r="12" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/>
                                <path d="M12,6v5.179L15.452,12.9" transform="translate(0.842 -0.302)" fill="none" stroke="#fafafa" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/>
                            </g>
                        </svg>
                    </div>
                    <div class="svg-a ">
                        <a href="study.html">Study</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="right">
        <div class="ri-top">
            <img src="img/logo.png" width="10vw">
            <svg id="ic_inbox" xmlns="http://www.w3.org/2000/svg" width="100%" height="auto" viewBox="0 0 37.5 37.5">
                <path  d="M0,0H37.5V37.5H0Z" fill="none"/>
                <rect  width="28" height="22" rx="2" transform="translate(5 8)" fill="none" stroke="#7e84a3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                <path  d="M3,7l14.063,9.375L31.125,7" transform="translate(1.688 3.938)" fill="none" stroke="#7e84a3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
            </svg>
            <svg id="ic-bell" xmlns="http://www.w3.org/2000/svg" width="100%" height="auto" viewBox="0 0 34.232 34.232">
                <path  d="M0,0H34.232V34.232H0Z" fill="none"/>
                <path d="M12.558,5.853a2.853,2.853,0,1,1,5.705,0,9.984,9.984,0,0,1,5.705,8.558V18.69a5.705,5.705,0,0,0,2.853,4.279H4A5.705,5.705,0,0,0,6.853,18.69V14.411a9.984,9.984,0,0,1,5.705-8.558" transform="translate(1.705 1.279)" fill="none" stroke="#7e84a3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                <path d="M9,17v1.426a4.279,4.279,0,0,0,8.558,0V17" transform="translate(3.837 7.247)" fill="none" stroke="#7e84a3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
            </svg>
            <svg id="ic_help" xmlns="http://www.w3.org/2000/svg" width="100%" height="auto" viewBox="0 0 29.931 29.931">
                <path d="M0,0H29.931V29.931H0Z" fill="none"/>
                <circle cx="11.009" cy="11.009" r="11.009" transform="translate(4.128 4.128)" fill="none" stroke="#7e84a3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                <line  transform="translate(15.138 21.33)" fill="none" stroke="#7e84a3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                <path  d="M12.494,15.113a1.871,1.871,0,0,1,1.247-1.871A3.243,3.243,0,1,0,10,8.254" transform="translate(2.471 1.723)" fill="none" stroke="#7e84a3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="80%" height="auto" viewBox="0 0 25.1 25.1">
                <path id="color" d="M23.624,25.1a1.48,1.48,0,0,1-.9-.31l-.14-.124-4.79-4.788a10.973,10.973,0,0,1-6.716,2.268A11.074,11.074,0,1,1,22.148,11.073a10.972,10.972,0,0,1-2.268,6.716l4.788,4.79A1.477,1.477,0,0,1,23.624,25.1ZM11.073,2.953a8.121,8.121,0,1,0,5.236,14.329,1.474,1.474,0,0,1,.973-.974A8.12,8.12,0,0,0,11.073,2.953Z" fill="#7e84a3"/>
            </svg>

        </div>
        <div class="main_content">
            <p class="title">Tasks</p>
            <div class="data-main">
                <div style="margin: 30px 0;">
                    <a class="sc-mark-type " href="javascript:void(0)" onclick="on_clickSP(-1)" >all</a>
                    <a class="sc-mark-type" href="javascript:void(0)" onclick="on_clickSP(0)" >Courses</a>
                    <a class="sc-mark-type" href="javascript:void(0)" onclick="on_clickSP(1)" >Assessment</a>
                    <a class="sc-mark-type" href="javascript:void(0)" onclick="on_clickSP(2)" >Meeting</a>
                    <a class="sc-mark-type" href="javascript:void(0)" onclick="on_clickSP(3)" >Holiday</a>
                </div>
                <hr class="layui-border-black">
                <div class="data-list">
                    <hr class="layui-border-black data-hr">
                    <ul class="ul" id="ul"></ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="js/jquery.min.js"></script>
<script >
    var local_task_new= localStorage.getItem('local_task_new');
    var task_array = JSON.parse(local_task_new);

    var local_div_Test = localStorage.getItem('local_div_Test');
    var json_div_Array = JSON.parse(local_div_Test);

    document.getElementById("ul").innerHTML=''
    var type_arr=["course","Assessment","Meeting","Holiday"]


    function add_html(json){
        document.getElementById("ul").innerHTML=''
        for(var i in json) {
            var name=json[i].task;
            var div_task=json_div_Array[name];

            var type=json[i].type;
            var step=json_div_Array[name].length;

            // console.log(name);
            var all=div_task.length;
            var finish=0;
            var div_task_inner=''
            for(var j in div_task){
                if(div_task[j].isfinish===1){
                    finish++;
                }
                div_task_inner+='<li><p>'+div_task[j].task+'</p></li>'
            }

            var pro_width=finish*100/all;

            if (i % 2 == 0) {
                document.getElementById("ul").innerHTML+=' <li class="li">\n' +
                    '                            <div class="layui-progress data-pro">\n' +
                    '                                <div class="layui-progress-bar bg-1" style="width: '+ pro_width+'%"></div>\n' +
                    '                            </div>\n' +
                    '                            <div class="name">\n' +
                    '                                <p>'+type_arr[type]+'</p>\n' +
                    '                                <p>'+name+'</p>\n' +
                    '                                <p>(step '+step+' )</p>\n' +
                    '                            </div>\n' +
                    '                            <div class="border-col col-up"></div>\n' +
                    '                            <div class="date">'+json[i].due_date+'</div>\n' +
                    '                            <div class="content">\n' +
                    '                                <p class="title-3">divide task</p>\n' +
                    '                                <div class="data-con data-link">\n' +
                    '                                    <ul>\n' + div_task_inner+
                    '                                    </ul>\n' +
                    '                                </div>\n' +
                    '                            </div>\n' +
                    '                        </li>'
            }else {
                document.getElementById("ul").innerHTML+=' <li class="li ">\n' +
                    '                            <div class="content">\n' +
                    '                                <p class="title-3">divide task</p>\n' +
                    '                                <div class="data-con data-link">\n' +
                    '                                    <ul>\n'  + div_task_inner+
                    '                                    </ul>\n' +
                    '                                </div>\n' +
                    '                            </div>\n' +
                    '                            <div class="date">'+json[i].due_date+'</div>\n' +
                    '                            <div class="border-col col-down"></div>\n' +
                    '                            <div class="name name2">\n' +
                    '                                <p>'+type_arr[type]+'</p>\n' +
                    '                                <p>'+name+'</p>\n' +
                    '                                <p>(step '+step+' )</p>\n' +
                    '                            </div>\n' +
                    '                            <div class="layui-progress data-pro data-pro2">\n' +
                    '                                <div class="layui-progress-bar bg-1" style="width: '+ pro_width+'%"></div>\n' +
                    '                            </div>\n' +
                    '                        </li>'
            }

        }
    }

    function on_clickSP(num) {
        var json=[];
        if(num===-1){
            add_html(task_array);
        }else{
            for(var i in task_array){
                if(task_array[i].type==num){
                    json.push(task_array[i])
                }
            }
            console.log(json)
            add_html(json)
        }
    }
    on_clickSP(-1);
</script>

</body>
</html>